<template>
  <div class="page">
    <div class="my-rides-container">
      <div class="my-rides">
        <h1>Twoje rezerwacje</h1>
        <div v-if="loading" class="loading">Ładowanie...</div>
        <div v-if="error" class="error">{{ error }}</div>
        <div v-if="rides.length === 0 && !loading" class="no-rides">
          Brak aktywnych rezerwacji.
        </div>

        <ul v-if="rides.length > 0">
          <li v-for="(ride, index) in rides" :key="ride.id" class="ride-item">
            <h2>Przejazd: {{ ride.departure }} → {{ ride.destination }}</h2>
            <p><strong>Data:</strong> {{ formatDate(ride.dateTime) }}</p>
            <p>
              <strong>Zarezerwowane miejsca:</strong>
              {{ reservations[index]?.seats }}
            </p>
            <button @click="cancelReservation(index, ride.id)">
              Odwołaj rezerwację
            </button>

            <!-- Szczegóły -->
            <div class="details">
              <p>
                <strong>Dokładny adres wyjazdu:</strong>
                {{ ride.exactDepartureAddress }}
              </p>
              <p>
                <strong>Dokładny adres dojazdu:</strong>
                {{ ride.exactDestinationAddress }}
              </p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>
